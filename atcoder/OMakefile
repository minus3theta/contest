CXXFLAGS += -std=gnu++1y

.SUBDIRS: $(glob D, *)
	include ./BuildInfo
	.SUBDIRS: $(glob D, *)
		cxxtargs = $(rootname $(glob i, *.cpp))
		rstargs = $(rootname $(glob i, *.rs))
		targs = $(cxxtargs) $(rstargs)
		$(cxxtargs): %: %.cpp
			$(CXX) $(CXXFLAGS) -o $@ $<

		$(rstargs): %: %.rs
			rustc $<

		cpp:
			foreach(id, $(problems)):
				cp(../../../template/template.cpp $(id).cpp)

		all: $(targs)

		clean:
			rm -f $(targs)

		.DEFAULT: all

	.DEFAULT: all
